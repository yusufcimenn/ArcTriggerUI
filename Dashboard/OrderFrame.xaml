<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ArcTriggerUI.Dashboard.OrderFrame">

    <ContentView.Resources>
        <!-- sizes -->
        <x:Double x:Key="FontSmall">12</x:Double>
        <x:Double x:Key="ControlHeight">32</x:Double>
        <x:Double x:Key="PickerHeight">36</x:Double>
        <x:Double x:Key="ChipHeight">28</x:Double>

        <!-- base labels -->
        <Style TargetType="Label">
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="FontSize" Value="{StaticResource FontSmall}" />
        </Style>

        <!-- section headers (centered) -->
        <Style x:Key="HeaderLabel" TargetType="Label">
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="FontSize" Value="{StaticResource FontSmall}" />
            <Setter Property="HorizontalTextAlignment" Value="Center" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="Margin" Value="0,0,0,2" />
        </Style>

        <!-- numeric entries: compact & centered text -->
        <Style x:Key="EntryNumericDense" TargetType="Entry">
            <Setter Property="HeightRequest" Value="{StaticResource ControlHeight}" />
            <Setter Property="WidthRequest" Value="110" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="HorizontalTextAlignment" Value="Center" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="PlaceholderColor"
            Value="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}" />
            <Setter Property="Margin" Value="0" />
            
        </Style>

        <!-- Base button -->
        <Style x:Key="BaseButton" TargetType="Button">
            <Setter Property="HeightRequest" Value="{StaticResource ControlHeight}" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="BorderColor"
            Value="{AppThemeBinding Light=#E5E7EB, Dark=#FFFFFF}" />
            <Setter Property="BorderWidth" Value="1" />
            <Setter Property="Padding" Value="10,4" />
            <Setter Property="Margin" Value="4,0" />
        </Style>

        <!-- Küçük üst/alt ok butonu -->
        <Style x:Key="SpinButton" TargetType="Button">
            <Setter Property="WidthRequest" Value="22" />
            <Setter Property="HeightRequest" Value="16" />
            <Setter Property="MinimumHeightRequest" Value="16" />
            <Setter Property="CornerRadius" Value="4" />
            <Setter Property="FontSize" Value="9" />
            <Setter Property="Padding" Value="0" />
            <Setter Property="Margin" Value="0" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="BorderColor"
            Value="{AppThemeBinding Light=#E5E7EB, Dark=#FFFFFF}" />
            <Setter Property="BorderWidth" Value="1" />
        </Style>

        <!-- Chip -->
        <Style x:Key="ChipButton" TargetType="Button">
            <Setter Property="HeightRequest" Value="24" />
            <Setter Property="MinimumHeightRequest" Value="24" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="FontSize" Value="11" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="BorderColor"
            Value="{AppThemeBinding Light=#000000, Dark=#FFFFFF}" />
            <Setter Property="BorderWidth" Value="1" />
            <Setter Property="Padding" Value="8,2" />
            <Setter Property="Margin" Value="2,0" />

        </Style>

        <!-- Actions -->
        <Style x:Key="ActionDanger" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="HeightRequest" Value="30" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="12,4" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#EF4444, Dark=#DC2626}" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="BorderWidth" Value="0" />
        </Style>

        <Style x:Key="ActionNeutral" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="HeightRequest" Value="30" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="12,4" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#E5E7EB, Dark=#2A2D34}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="BorderWidth" Value="0" />
        </Style>

        <Style x:Key="ActionOcean" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="HeightRequest" Value="30" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="12,4" />
            <Setter Property="BackgroundColor" Value="#0694F9" />
            <Setter Property="TextColor" Value="#FFFFFF" />
            <Setter Property="BorderWidth" Value="0" />
        </Style>

        <!-- Place Order (koyu yeşil) -->
        <Style x:Key="PrimaryAction" TargetType="Button" BasedOn="{StaticResource BaseButton}">
            <Setter Property="HeightRequest" Value="30" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="16,6" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#166534, Dark=#16A34A}" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="BorderWidth" Value="0" />
        </Style>

        <!-- Entry / Picker taban -->
        <Style TargetType="Entry" x:Key="EntryBase">
            <Setter Property="HeightRequest" Value="{StaticResource ControlHeight}" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="PlaceholderColor"
            Value="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}" />
            <Setter Property="Margin" Value="4,0" />
        </Style>
        <Style TargetType="Entry" BasedOn="{StaticResource EntryBase}" />

        <Style TargetType="Picker">
            <Setter Property="HeightRequest" Value="{StaticResource PickerHeight}" />
            <Setter Property="MinimumHeightRequest" Value="{StaticResource PickerHeight}" />
            <Setter Property="BackgroundColor"
            Value="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}" />
            <Setter Property="TextColor"
            Value="{AppThemeBinding Light=#111827, Dark=#F3F4F6}" />
            <Setter Property="TitleColor"
            Value="{AppThemeBinding Light=#9CA3AF, Dark=#6B7280}" />
            <Setter Property="Margin" Value="4,0" />
            <Setter Property="HorizontalOptions" Value="Start" />
            <Setter Property="VerticalOptions" Value="Center" />
        </Style>

    </ContentView.Resources>

    <ScrollView x:Name="Scrolls" Orientation="Both">
        <Grid x:Name="ContentGrid" Padding="8" HorizontalOptions="Center" VerticalOptions="Center">
            <FlexLayout>

                <Frame HorizontalOptions="Fill"
                   VerticalOptions="Center"
                   BackgroundColor="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}"
                   BorderColor="Gray"
                   CornerRadius="12"
                   HasShadow="False"
                   Padding="12">


                    <Grid Padding="16" RowSpacing="8" ColumnSpacing="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- TOP ROW: inputs -->
                        <Grid Grid.Row="0" Grid.Column="0">
                            <HorizontalStackLayout Spacing="8" Padding="12,2" HorizontalOptions="Start">

                                <!-- Stock -->
                                <VerticalStackLayout Spacing="2" WidthRequest="220" MaximumHeightRequest="170">
                                    <Label Text="Stock" Style="{StaticResource HeaderLabel}" />

                                    <!-- İsim/symbol arama -->
                                    <Border
                                     Stroke="{AppThemeBinding Light=#D1D5DB, Dark=#374151}"
                                     StrokeThickness="1"
                                     StrokeShape="RoundRectangle 8">
                                        <Entry x:Name="SymbolSearchEntry"
                                     Placeholder="Search by name or symbol"
                                     TextColor="{AppThemeBinding Light=#111827, Dark=#F3F4F6}"
                                     BackgroundColor="{AppThemeBinding Light=#FAFAFA, Dark=#1B1D22}"
                                     ReturnType="Search"
                                               
                                     TextChanged="OnSymbolSearchTextChanged" />
                                    </Border>

                                    <!-- Yazarken çıkan öneriler -->
                                    <CollectionView x:Name="SymbolSuggestions"
                IsVisible="False"
                SelectionMode="Single"
                ItemsLayout="VerticalList"
                HeightRequest="180"
                BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#1B1D22}"
                Margin="0,4,0,0"
                ItemSizingStrategy="MeasureAllItems"
                                                    SelectionChanged="SymbolSuggestions_SelectionChanged">
                                        
                                        <CollectionView.ItemTemplate>
                                            <DataTemplate>
                                                <Label Text="{Binding Display}"              
                   Padding="10,6"
                   FontSize="14"
                   VerticalTextAlignment="Center"
                   TextColor="{AppThemeBinding Light=#111827, Dark=#F3F4F6}"/>
                                            </DataTemplate>
                                        </CollectionView.ItemTemplate>
                                    </CollectionView>

                                    <!-- Dinamik sonuçlar -->
                                    
                                </VerticalStackLayout>

                                <!-- Market Price -->
                                <VerticalStackLayout Spacing="4" Padding="0,0,6,0" WidthRequest="120">
                                    <Label Text="Market Price:"
                                           Style="{StaticResource HeaderLabel}"
                                           HorizontalTextAlignment="Start"
                                           HorizontalOptions="Start" />

                                    <Frame x:Name="MarketPriceBadge"
                                           Padding="4,2"
                                           CornerRadius="6"
                                           HasShadow="False"
                                           BackgroundColor="Transparent"
                                           HorizontalOptions="Start">
                                        <Label x:Name="MarketPriceLabel"
                                               Text="—"
                                               FontSize="14"
                                               VerticalTextAlignment="Center"
                                               HorizontalTextAlignment="Center"
                                               TextColor="White" />
                                    </Frame>

                                   
                                </VerticalStackLayout>

                                <!-- SECDEF: SecType -->
                                <VerticalStackLayout Spacing="2" WidthRequest="100">
                                    <Label Text="SecType" Style="{StaticResource HeaderLabel}" />

                                    <Picker x:Name="SecTypePicker"
                                        Title=""
                                        WidthRequest="100"
                                             SelectedIndexChanged="LoadOptionParams_Clicked"
                                        >
                                        <Picker.Items>
                                            <x:String>STK</x:String>
                                            <x:String>FUT</x:String>
                                            <x:String>IND</x:String>
                                        </Picker.Items>
                                    </Picker>

                                </VerticalStackLayout>

                                <!-- SECDEF: Months -->
                                <VerticalStackLayout Spacing="2" WidthRequest="120">
                                    
                                    <Label Text="Months" Style="{StaticResource HeaderLabel}" />
                                    <Picker x:Name="MonthsPicker"
                                        Title=""
                                        WidthRequest="120"
                                        />
                                </VerticalStackLayout>

                                <!-- Strike -->
                                <VerticalStackLayout Spacing="2" Padding="0,0,0,0" WidthRequest="100">
                                    <Label Text="Strike" Style="{StaticResource HeaderLabel}"/>
                                    <Picker x:Name="StrikesPicker" 
                                            Title=""
                                       

                                        WidthRequest="100"
                                           >
                                      
                                    </Picker>

                                </VerticalStackLayout>

                                <!-- Maturity (new) -->
                                <VerticalStackLayout Spacing="2" Padding="0,0,0,0" WidthRequest="100">
                                    <Label Text="Maturity" Style="{StaticResource HeaderLabel}" />
                                    <Picker 
                                     x:Name="MaturityDateLabel"
                                     Title="—"
                                     WidthRequest="100"
                                     SelectedIndexChanged="MaturityDateLabel_SelectedIndexChanged"/>
                                </VerticalStackLayout>

                                <!-- Trigger -->
                                <VerticalStackLayout Spacing="2" Padding="12,0" WidthRequest="200">
                                    <Label Text="Trigger Level" Style="{StaticResource HeaderLabel}" />
                                    <Grid ColumnSpacing="6" Padding="0,0,4,0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="110" />
                                            <ColumnDefinition Width="50" />
                                        </Grid.ColumnDefinitions>
                                        <Border Padding="0,0,0,0"
                                            Stroke="{AppThemeBinding Light=#D1D5DB, Dark=#374151}"
                                            StrokeThickness="1"
                                            StrokeShape="RoundRectangle 8">
                                            <Entry x:Name="TriggerEntry"
                                               Grid.Column="0"
                                               Style="{StaticResource EntryNumericDense}"
                                               Placeholder="100.00"
                                               Keyboard="Numeric"
                                               TextChanged="OnTriggerPriceTextChanged"/>
                                        </Border>
                                        <Grid Grid.Column="1" RowDefinitions="Auto,Auto" RowSpacing="4"
                                          VerticalOptions="Center">
                                            <Button Text="▲"
                                                Style="{StaticResource SpinButton}"
                                                Clicked="OnIncreaseTriggerClicked"/>
                                            <Button Text="▼"
                                                Grid.Row="1"
                                                Style="{StaticResource SpinButton}"
                                                Clicked="OnDecreaseTriggerClicked"/>
                                        </Grid>
                                    </Grid>
                                </VerticalStackLayout>

                                <!-- Type -->
                                <VerticalStackLayout Spacing="2" WidthRequest="150">
                                    <Label Text="Type" Style="{StaticResource HeaderLabel}"/>
                                    <HorizontalStackLayout Spacing="5" VerticalOptions="Center">
                                        <RadioButton x:Name="CallRadioButton" 
                                                 Content="Call" 
                                                 IsChecked="True"
                                                 TextColor="{DynamicResource PrimaryTextColor}"
                                                />
                                        <RadioButton x:Name="PutRadioButton" 
                                                 Content="Put"
                                                 TextColor="{DynamicResource PrimaryTextColor}"
                                                />

                                    </HorizontalStackLayout>
                                    <HorizontalStackLayout>
                                        <RadioButton x:Name="MktRadioButton" 
                                                     Content="MKT" 
                                                     IsChecked="True"
                                                     TextColor="{DynamicResource PrimaryTextColor}"
                                                     CheckedChanged="OnOrderModeCheckedChanged"/>
                                        <RadioButton x:Name="LmtRadioButton" 
                                                     Content="LMT"
                                                     TextColor="{DynamicResource PrimaryTextColor}"
                                                     CheckedChanged="OnOrderModeCheckedChanged"/>

                                    </HorizontalStackLayout>
                                </VerticalStackLayout>

                                <!-- Order -->


                                <!-- Offset -->
                                <VerticalStackLayout Spacing="2" Padding="10,0" WidthRequest="170">
                                    <Label Text="Offset" Style="{StaticResource HeaderLabel}"/>

                                    <Entry x:Name="OffsetEntry"
                                       Style="{StaticResource EntryNumericDense}"
                                       WidthRequest="90"
                                       HorizontalTextAlignment="Center"
                                       Placeholder="0.05" Keyboard="Numeric" />

                                    <HorizontalStackLayout Spacing="4" VerticalOptions="Center" Margin="0,4,0,0">
                                        <Button x:Name="BtnOff1" Text="0.05"
                                            Style="{StaticResource ChipButton}"
                                            Clicked="OnHotPresetClicked" CommandParameter="off">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>

                                        <Button x:Name="BtnOff2" Text="0.10"
                                            Style="{StaticResource ChipButton}"
                                            Clicked="OnHotPresetClicked" CommandParameter="off">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>

                                        <Button Text="+"
                                            WidthRequest="36" MinimumWidthRequest="36" Padding="0"
                                            Style="{StaticResource ChipButton}"
                                            Clicked="OnHotAddClicked" CommandParameter="off"/>
                                    </HorizontalStackLayout>
                                </VerticalStackLayout>





                                <!-- Alpha -->

                            </HorizontalStackLayout>
                        </Grid>

                        <!-- BOTTOM: entries + chip presets -->
                        <Grid Grid.Row="1" Grid.Column="0">
                            <HorizontalStackLayout Spacing="10" Padding="6,4">

                                <!-- Position Size -->
                                <Grid HorizontalOptions="Start"
                                  RowDefinitions="Auto,Auto"
                                  ColumnDefinitions="Auto,*"
                                  Padding="12,0">
                                    <Label Grid.Row="0" Grid.ColumnSpan="2"
                                       Text="Position Size ($)"
                                       Style="{StaticResource HeaderLabel}" />

                                    <Entry x:Name="PositionEntry"
                                       Grid.Row="1" Grid.Column="0"
                                       WidthRequest="120"
                                       HorizontalOptions="Start"
                                       HorizontalTextAlignment="Center"
                                       Placeholder="500"
                                       Keyboard="Numeric"
                                       TextChanged="OnPositionTextChanged" />

                                    <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="4" VerticalOptions="Center">
                                        <Button x:Name="BtnPos1" Text="$5K"  Style="{StaticResource ChipButton}" 
                                            Clicked="OnHotPresetClicked" CommandParameter="pos">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button x:Name="BtnPos2" Text="$10K" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="pos">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button x:Name="BtnPos3" Text="$25K" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="pos">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button Text="+" Style="{StaticResource ChipButton}" Clicked="OnHotAddClicked" CommandParameter="pos"/>
                                        
                                        <VerticalStackLayout Padding="40,0,0,0" >

                                            <Entry IsEnabled="False" 
                                                  
                                                   
                                            x:Name="lblQuantity"></Entry>
                                            <Label 
                                                    Text="Quantity"
                                                    Style="{StaticResource HeaderLabel}" />
                                        </VerticalStackLayout>
                                    </HorizontalStackLayout>

                                </Grid>

                                <!-- Stop Loss -->
                                <Grid HorizontalOptions="Start" RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,*" Margin="8,0,0,0" Padding="12,0">
                                    <Label Grid.Row="0" Grid.ColumnSpan="2" Text="Stop Loss ($)" Style="{StaticResource HeaderLabel}" />
                                    <Entry x:Name="StopLossEntry" Grid.Row="1" Grid.Column="0" WidthRequest="90"
                                       Placeholder="130.00" Keyboard="Numeric" TextChanged="OnStopLossTextChanged"
                                       HorizontalOptions="Start" HorizontalTextAlignment="Center"/>
                                    <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="4" VerticalOptions="Center">
                                        <Button x:Name="BtnStop1" Text="$0.20" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="stop">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button x:Name="BtnStop2" Text="$0.50" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="stop">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button x:Name="BtnStop3" Text="$1.00" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="stop">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button Text="+" Style="{StaticResource ChipButton}" Clicked="OnHotAddClicked" CommandParameter="stop"/>
                                    </HorizontalStackLayout>
                                </Grid>

                                <!-- Profit Taking -->
                                <Grid HorizontalOptions="Start" RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,*" Padding="12,0">
                                    <Label Grid.Row="0" Grid.ColumnSpan="2" Text="Profit Taking" Style="{StaticResource HeaderLabel}"/>
                                    <Entry x:Name="ProfitEntry" Grid.Row="1" Grid.Column="0" WidthRequest="90"
                                       Placeholder="%" Keyboard="Numeric"
                                       HorizontalOptions="Start" HorizontalTextAlignment="Center" />
                                    <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="4" VerticalOptions="Center">
                                        <Button x:Name="BtnProf1" Text="10%" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="prof">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button x:Name="BtnProf2" Text="20%" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="prof">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button x:Name="BtnProf3" Text="30%" Style="{StaticResource ChipButton}" Clicked="OnHotPresetClicked" CommandParameter="prof">
                                            <Button.GestureRecognizers>
                                                <TapGestureRecognizer Buttons="Secondary" Tapped="OnPresetRightClick"/>
                                            </Button.GestureRecognizers>
                                        </Button>
                                        <Button Text="+" Style="{StaticResource ChipButton}" Clicked="OnHotAddClicked" CommandParameter="prof"/>
                                    </HorizontalStackLayout>
                                </Grid>

                                <VerticalStackLayout Spacing="2" WidthRequest="100" >
                                    <Label HorizontalTextAlignment="Center">Expiry</Label>
                                    <Picker x:Name="ExpPicker" WidthRequest="100"
                                             SelectedIndexChanged="OnExpirationChanged">
                                        <Picker.Items>
                                            <x:String>GTC</x:String>
                                            <x:String>OPG</x:String>
                                            <x:String>DAY</x:String>
                                            <x:String>IOC</x:String>
                                            <x:String>PAX</x:String>
                                        </Picker.Items>
                                    </Picker>
                                </VerticalStackLayout>

                                <Grid Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" RowSpacing="12" Padding="12,0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <VerticalStackLayout >
                                        
                                        <HorizontalStackLayout Spacing="1">

                                            <Button Text="Save"
                                                Style="{StaticResource PrimaryAction}"
                                               />
                                            <Button Text="Invalidate" Style="{StaticResource ActionDanger}" Clicked="OnTrailClicked"/>
                                            <Button Text="Breakeven"  Style="{StaticResource ActionNeutral}" Clicked="OnBreakevenClicked"/>
                                        
                                            <Button Text="Cancel"
                BackgroundColor="IndianRed"
                Clicked="OnCancelClicked"/>
                                            

                                        </HorizontalStackLayout>
                                        <HorizontalStackLayout Padding="0,10,10,10">
                                        </HorizontalStackLayout>

                                    </VerticalStackLayout>

                                </Grid>

                            </HorizontalStackLayout>

                        </Grid>

                        <!-- Orders Container -->
                        <VerticalStackLayout x:Name="OrdersContainer"
                                         Grid.Row="3" Grid.ColumnSpan="2"
                                         Spacing="8"
                                         Padding="6"/>

                    </Grid>
                </Frame>
            </FlexLayout>
        </Grid>
    </ScrollView>
</ContentView>
