<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ArcTriggerUI.Dashboard.OrderFrame">
    
    <ContentView.Resources>
        <x:Double x:Key="FontSmall">12</x:Double>
        <x:Double x:Key="ControlHeight">28</x:Double>
        <x:Double x:Key="ChipHeight">26</x:Double>
        <x:Double x:Key="PickerHeight">16</x:Double>

        <Style TargetType="Label">
            <Setter Property="TextColor" Value="{DynamicResource PrimaryTextColor}" />
            <Setter Property="FontSize" Value="{StaticResource FontSmall}" />
        </Style>
        <!-- Başlıkları ortalamak için -->
        <Style x:Key="HeaderLabel" TargetType="Label">
            <Setter Property="TextColor" Value="{DynamicResource PrimaryTextColor}" />
            <Setter Property="FontSize"  Value="{StaticResource FontSmall}" />
            <Setter Property="HorizontalTextAlignment" Value="Center" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="Margin" Value="0,0,0,2" />
        </Style>

        <!-- Sayısal girişler: dar ve metin ortalı -->
        <Style x:Key="EntryNumericDense" TargetType="Entry">
            <Setter Property="HeightRequest" Value="{StaticResource ControlHeight}" />
            <Setter Property="WidthRequest"  Value="110" />
            <Setter Property="HorizontalOptions" Value="Center" />
            <Setter Property="HorizontalTextAlignment" Value="Center" />
            <Setter Property="BackgroundColor" Value="{DynamicResource SecondaryBackgroundColor}" />
            <Setter Property="TextColor" Value="{DynamicResource PrimaryTextColor}" />
            <Setter Property="PlaceholderColor" Value="#8A8A8A" />
            <Setter Property="Margin" Value="0" />
        </Style>

        <Style TargetType="Button">
            <Setter Property="HeightRequest" Value="28" />
            <Setter Property="CornerRadius" Value="6" />
            <Setter Property="BackgroundColor" Value="#242e2a" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="Padding" Value="8,2" />
            <Setter Property="Margin" Value="4,0" />
        </Style>
        <!-- Chip (preset) butonları: açık zemin + ince border -->
        <Style x:Key="ChipButton" TargetType="Button">
            <Setter Property="HeightRequest" Value="{StaticResource ChipHeight}" />
            <Setter Property="CornerRadius" Value="8" />
            <Setter Property="BackgroundColor" Value="#F8FAFC" />
            <Setter Property="TextColor" Value="{DynamicResource PrimaryTextColor}" />
            <Setter Property="BorderColor" Value="{DynamicResource CardBorderColor}" />
            <Setter Property="BorderWidth" Value="1" />
            <Setter Property="Padding" Value="10,4" />
            <Setter Property="Margin" Value="4,0" />
        </Style>

        <!-- Action buttons -->
        <Style x:Key="ActionDanger" TargetType="Button">
            <Setter Property="HeightRequest" Value="30" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="12,4" />
            <Setter Property="BackgroundColor" Value="{DynamicResource ActionDangerColor}" />
            <Setter Property="TextColor" Value="White" />
        </Style>

        <Style x:Key="ActionNeutral" TargetType="Button">
            <Setter Property="HeightRequest" Value="30" />
            <Setter Property="CornerRadius" Value="10" />
            <Setter Property="Padding" Value="12,4" />
            <Setter Property="BackgroundColor" Value="#E5E7EB" />
            <Setter Property="TextColor" Value="#111827" />
        </Style>

        <!-- Primary (Place Order) -->
        <Style x:Key="PrimaryAction" TargetType="Button">
            <Setter Property="HeightRequest" Value="34" />
            <Setter Property="CornerRadius" Value="12" />
            <Setter Property="Padding" Value="16,6" />
            <Setter Property="BackgroundColor" Value="{DynamicResource PrimaryActionColor}" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="FontAttributes" Value="Bold" />
        </Style>

        <!-- Entry / Picker açık tema (ışık zemin) -->
        <Style TargetType="Entry">
            <Setter Property="HeightRequest" Value="{StaticResource PickerHeight}" />
            <Setter Property="MinimumHeightRequest" Value="{StaticResource PickerHeight}" />
            <Setter Property="HeightRequest" Value="{StaticResource ControlHeight}" />
            <Setter Property="BackgroundColor" Value="{DynamicResource SecondaryBackgroundColor}" />
            <Setter Property="TextColor" Value="{DynamicResource PrimaryTextColor}" />
            <Setter Property="PlaceholderColor" Value="#9CA3AF" />
            <Setter Property="Margin" Value="4,0" />
        </Style>

        <Style TargetType="Picker">
            <Setter Property="HeightRequest" Value="{StaticResource ControlHeight}" />
            <Setter Property="BackgroundColor" Value="Black" />
            <Setter Property="TextColor" Value="{DynamicResource PrimaryTextColor}" />
            <Setter Property="TitleColor" Value="#9CA3AF" />
            <Setter Property="Margin" Value="4,0" />
        </Style>


        <!-- LIGHT THEME -->
        <Color x:Key="PageBackgroundColor">#FFFFFF</Color>
        <Color x:Key="SecondaryBackgroundColor">#F3F4F6</Color>
        <Color x:Key="PrimaryTextColor">#111827</Color>
        <Color x:Key="MutedTextColor">#6B7280</Color>
        <Color x:Key="CardBorderColor">#E5E7EB</Color>
        <Color x:Key="PrimaryActionColor">#111827</Color>
        <Color x:Key="ActionDangerColor">#EF4444</Color>
        <!-- Invalidate -->
    </ContentView.Resources>

    <Grid Padding="8" HorizontalOptions="Fill" VerticalOptions="Fill" Background="#FFFFFF" BackgroundColor="#FDD7D7">
        <Frame HorizontalOptions="Fill"
            VerticalOptions="Center"
            BackgroundColor="{DynamicResource SecondaryBackgroundColor}"
            BorderColor="{DynamicResource CardBorderColor}"
            CornerRadius="12"
            HasShadow="False"
            Padding="10">

            <Grid RowDefinitions="Auto,Auto,Auto" ColumnDefinitions="*,Auto">

                <!-- TOP ROW: inputs -->
                <ScrollView Orientation="Horizontal" Grid.Row="0" Grid.Column="0">
                    <HorizontalStackLayout Spacing="10" Padding="12,2" HorizontalOptions="Fill">

                        <!-- Stock -->
                        <VerticalStackLayout Spacing="2">
                            <Label Text="Stock" Style="{StaticResource HeaderLabel}" />
                            <Picker x:Name="StockPicker" Title="Symbol" SelectedIndexChanged="OnSymbolChanged" ScaleX="0" ScaleY="0" HeightRequest="0">
                                <Picker.Items>
                                    <x:String>AAPL</x:String>
                                    <x:String>MSFT</x:String>
                                    <x:String>NVDA</x:String>
                                    <x:String>TSLA</x:String>
                                    <x:String>GOOGL</x:String>
                                    <x:String>AMZN</x:String>
                                </Picker.Items>
                            </Picker>
                        </VerticalStackLayout>

                        <!-- Trigger -->
                        <VerticalStackLayout Spacing="2" Padding="12,0">
                            <Label Text="Trigger Level" Style="{StaticResource HeaderLabel}" />
                            <Grid ColumnSpacing="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="28" />
                                    <ColumnDefinition Width="28" />
                                </Grid.ColumnDefinitions>
                                <Entry x:Name="TriggerEntry" Grid.Column="0" Placeholder="100.00" Keyboard="Numeric" TextChanged="OnTriggerPriceTextChanged" 
                                    HorizontalOptions="Start"
                                    HorizontalTextAlignment="Center"/>
                                <Button Grid.Column="1" Text="▲" Clicked="OnIncreaseTriggerClicked"/>
                                <Button Grid.Column="2" Text="▼" Clicked="OnDecreaseTriggerClicked"/>
                            </Grid>
                        </VerticalStackLayout>

                        <!-- Type -->
                        <VerticalStackLayout Spacing="2">
                            <Label Text="Type" Style="{StaticResource HeaderLabel}"/>
                            <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                                <RadioButton x:Name="CallRadioButton" Content="Call" IsChecked="True" TextColor="{DynamicResource PrimaryTextColor}" CheckedChanged="OnCallOptionCheckedChanged"/>
                                <RadioButton x:Name="PutRadioButton" Content="Put" TextColor="{DynamicResource PrimaryTextColor}" CheckedChanged="OnPutOptionCheckedChanged"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>

                        <!-- Order -->
                        <VerticalStackLayout Spacing="2" Padding="12,0">
                            <Label Text="Order" Style="{StaticResource HeaderLabel}" />
                            <HorizontalStackLayout Spacing="12" VerticalOptions="Center">
                                <RadioButton x:Name="MktRadioButton" Content="MKT" IsChecked="True" TextColor="{DynamicResource PrimaryTextColor}" CheckedChanged="OnCallOptionCheckedChanged"/>
                                <RadioButton x:Name="LmtRadioButton" Content="LMT" TextColor="{DynamicResource PrimaryTextColor}" CheckedChanged="OnPutOptionCheckedChanged"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>

                        <!-- Offset -->
                        <VerticalStackLayout Spacing="2" Padding="12,0">
                            <Label Text="Offset" Style="{StaticResource HeaderLabel}"/>
                            <Entry x:Name="OffsetEntry" Placeholder=".05" Keyboard="Numeric"  HorizontalOptions="Start"
                         HorizontalTextAlignment="Center"/>
                            <HorizontalStackLayout Spacing="4">
                                <Button Text=".05" Style="{StaticResource ChipButton}" Clicked="OnOffsetPresetClicked"/>
                                <Button Text=".15" Style="{StaticResource ChipButton}" Clicked="OnOffsetPresetClicked"/>
                                <Button Text=".25" Style="{StaticResource ChipButton}" Clicked="OnOffsetPresetClicked"/>
                            </HorizontalStackLayout>
                        </VerticalStackLayout>

                        <!-- Strike / Expiry -->
                        <VerticalStackLayout Spacing="2" Padding="12,0">
                            <Label Text="Strike" Style="{StaticResource HeaderLabel}" />
                            <Grid ColumnSpacing="6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Picker x:Name="StrikePicker" Grid.Column="0" Title="Strike" SelectedIndexChanged="OnStrikeChanged">
                                    <Picker.Items>
                                        <x:String>120</x:String>
                                        <x:String>125</x:String>
                                        <x:String>130</x:String>
                                        <x:String>135</x:String>
                                        <x:String>140</x:String>
                                    </Picker.Items>
                                </Picker>
                            </Grid>
                        </VerticalStackLayout>
                        <VerticalStackLayout Spacing="2">
                            <Label Text="Expiry" Style="{StaticResource HeaderLabel}" />
                            <Grid ColumnSpacing="6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Picker x:Name="ExpPicker" Grid.Column="1" Title="dd/mm/yyyy" SelectedIndexChanged="OnExpirationChanged">
                                    <Picker.Items>
                                        <x:String>2025-09-20</x:String>
                                        <x:String>2025-10-18</x:String>
                                        <x:String>2025-11-15</x:String>
                                        <x:String>2025-12-20</x:String>
                                    </Picker.Items>
                                </Picker>
                            </Grid>
                        </VerticalStackLayout>


                        <!-- Optional flag -->
                        <HorizontalStackLayout Spacing="6" VerticalOptions="Center">
                            <CheckBox x:Name="AlphaCheck"/>
                            <Label Text="Alpha" VerticalOptions="Center"/>
                        </HorizontalStackLayout>

                    </HorizontalStackLayout>
                </ScrollView>

                <!-- TOP RIGHT: Place Order -->
                <Button Grid.Row="0" Grid.Column="1"
                     Text="Place Order"
                     HeightRequest="32"
                     CornerRadius="10"
                     Padding="0,4,16,4"
                     BackgroundColor="{DynamicResource AccentGreen}"
                     TextColor="Black"
                     FontAttributes="Bold"
                     Style="{StaticResource PrimaryAction}"
                     Clicked="OnCreateOrderClicked"/>

                <!-- BOTTOM LEFT: Entry + chip buttons -->
                <ScrollView Orientation="Horizontal" Grid.Row="1" Grid.Column="0">
                    <HorizontalStackLayout Spacing="10" Padding="6,4">

                        <!-- Position Size -->
                        <Grid HorizontalOptions="Start" RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,*" Padding="12,0">
                            <Label Grid.Row="0" Grid.ColumnSpan="2" Text="Position Size ($)" Style="{StaticResource HeaderLabel}" />
                            <Entry x:Name="PositionEntry" Grid.Row="1" Grid.Column="0" WidthRequest="120"  HorizontalOptions="Start"
                          HorizontalTextAlignment="Center" Placeholder="500" Keyboard="Numeric" TextChanged="OnPositionTextChanged"/>
                            <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="4" VerticalOptions="Center" >
                                <Button Text="$5K" Style="{StaticResource ChipButton}" Clicked="OnPositionPresetClicked"/>
                                <Button Text="$10K" Style="{StaticResource ChipButton}" Clicked="OnPositionPresetClicked"/>
                                <Button Text="$25K" Style="{StaticResource ChipButton}" Clicked="OnPositionPresetClicked"/>
                            </HorizontalStackLayout>
                        </Grid>

                        <!-- Stop Loss -->
                        <Grid HorizontalOptions="Start" RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,*" Margin="8,0,0,0" Padding="12,0">
                            <Label Grid.Row="0" Grid.ColumnSpan="2" Text="Stop Loss ($)" Style="{StaticResource HeaderLabel}" />
                            <Entry x:Name="StopLossEntry" Grid.Row="1" Grid.Column="0" WidthRequest="140" Placeholder="130.00" Keyboard="Numeric" TextChanged="OnStopLossTextChanged"
                                HorizontalOptions="Start" HorizontalTextAlignment="Center"/>
                            <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="4" VerticalOptions="Center">
                                <Button Text="$0.20" Style="{StaticResource ChipButton}" Clicked="OnStopLossPreset"/>
                                <Button Text="$0.50" Style="{StaticResource ChipButton}" Clicked="OnStopLossPreset"/>
                                <Button Text="$1.00" Style="{StaticResource ChipButton}" Clicked="OnStopLossPreset"/>
                            </HorizontalStackLayout>
                        </Grid>

                        <!-- Profit Taking -->
                        <Grid HorizontalOptions="Start" RowDefinitions="Auto,Auto" ColumnDefinitions="Auto,*" Padding="12,0">
                            <Label Grid.Row="0" Grid.ColumnSpan="2" Text="Profit Taking" Style="{StaticResource HeaderLabel}"/>
                            <Entry x:Name="ProfitEntry" Grid.Row="1" Grid.Column="0" WidthRequest="90" Placeholder="%" Keyboard="Numeric" 
                                HorizontalOptions="Start"  HorizontalTextAlignment="Center" />
                            <HorizontalStackLayout Grid.Row="1" Grid.Column="1" Spacing="4" VerticalOptions="Center">
                                <Button Text="10%" Style="{StaticResource ChipButton}" Clicked="OnProfitPresetClicked"/>
                                <Button Text="20%" Style="{StaticResource ChipButton}" Clicked="OnProfitPresetClicked"/>
                                <Button Text="30%" Style="{StaticResource ChipButton}" Clicked="OnProfitPresetClicked"/>
                                <Button Text="Rem" Style="{StaticResource ChipButton}" Clicked="OnProfitPresetClicked"/>
                                <Button Text="All" Style="{StaticResource ChipButton}" Clicked="OnProfitPresetClicked"/>
                            </HorizontalStackLayout>
                        </Grid>

                    </HorizontalStackLayout>
                </ScrollView>

                <!-- BOTTOM RIGHT: Actions -->
                <VerticalStackLayout Grid.Row="1" Grid.Column="1" Spacing="6" HorizontalOptions="End" Padding="0,0,16,0">
                    <Label Text="Actions" Style="{StaticResource HeaderLabel}" />
                    <HorizontalStackLayout Spacing="6">
                        <Button Text="Invalidate" Style="{StaticResource ActionDanger}" Clicked="OnTrailClicked"/>
                        <Button Text="Breakeven" Style="{StaticResource ActionNeutral}" Clicked="OnBreakevenClicked"/>
                    </HorizontalStackLayout>
                </VerticalStackLayout>

                <!-- Display Label for Strike/Expiry -->
                <Label x:Name="DisplayLabel"
                    Grid.Row="2" Grid.ColumnSpan="2"
                    TextColor="White"
                    FontSize="14"
                    Margin="6,10,6,0"/>
            </Grid>
        </Frame>
    </Grid>
</ContentView>
